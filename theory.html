<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°å­—å›¾åƒå¤„ç†åŸç† - ImageProcessLab</title>

    <!-- DNSé¢„è§£æå’Œèµ„æºé¢„åŠ è½½ -->
    <link rel="dns-prefetch" href="//unpkg.com">
    <link rel="preconnect" href="https://unpkg.com" crossorigin>
    <link rel="preload" href="https://unpkg.com/katex@0.16.8/dist/katex.min.css" as="style">
    <link rel="preload" href="https://unpkg.com/katex@0.16.8/dist/katex.min.js" as="script">

    <link rel="stylesheet" href="app-style.css">

    <!-- ä½¿ç”¨å›½å†…CDNæˆ–æœ¬åœ°èµ„æº -->
    <link rel="stylesheet" href="https://unpkg.com/katex@0.16.8/dist/katex.min.css">
    <script defer src="https://unpkg.com/katex@0.16.8/dist/katex.min.js"></script>
    <script defer src="https://unpkg.com/katex@0.16.8/dist/contrib/auto-render.min.js"></script>
    <style>
        .theory-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
            line-height: 1.8;
        }

        .theory-header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 16px;
        }

        .theory-section {
            margin-bottom: 3rem;
            padding: 2rem;
            background: var(--background-light);
            border-radius: 12px;
            border-left: 4px solid var(--primary-color);
        }

        .theory-section h2 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }

        .theory-section h3 {
            color: var(--text-color);
            margin: 1.5rem 0 1rem 0;
            font-size: 1.3rem;
        }

        .formula {
            background: var(--background-white);
            padding: 1.5rem;
            margin: 1rem 0;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            text-align: center;
            overflow-x: auto;
        }

        /* KaTeXæ ·å¼ä¼˜åŒ– */
        .katex-display {
            margin: 1rem 0 !important;
        }

        .katex {
            font-size: 1.1em !important;
        }

        .formula .katex-display {
            margin: 0.5rem 0 !important;
        }

        .inline-math {
            display: inline-block;
            margin: 0 0.2rem;
        }



        .algorithm-box {
            background: rgba(102, 126, 234, 0.1);
            border: 1px solid var(--primary-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .algorithm-box h4 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .color-space-demo {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .color-demo-item {
            background: var(--background-white);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .color-sample {
            width: 100%;
            height: 60px;
            border-radius: 4px;
            margin-bottom: 0.5rem;
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 0.75rem 1.5rem;
            background: var(--primary-color);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .back-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .toc {
            background: var(--background-white);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .toc h3 {
            margin-top: 0;
            color: var(--primary-color);
        }

        .toc ul {
            list-style: none;
            padding-left: 0;
        }

        .toc li {
            margin: 0.5rem 0;
        }

        .toc a {
            color: var(--text-color);
            text-decoration: none;
            padding: 0.25rem 0;
            display: block;
            border-radius: 4px;
            padding-left: 1rem;
            transition: all 0.3s ease;
        }

        .toc a:hover {
            background: var(--primary-color);
            color: white;
            padding-left: 1.5rem;
        }

        @media (max-width: 768px) {
            .theory-container {
                padding: 1rem;
            }
            
            .formula {
                font-size: 0.9rem;
                padding: 1rem;
            }
            
            .color-space-demo {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <a href="app.html" class="back-btn">â† è¿”å›ä¸»é¡µ</a>
    
    <div class="theory-container">
        <div class="theory-header">
            <h1>æ•°å­—å›¾åƒå¤„ç†çš„æ•°å­¦åŸç†</h1>
            <p>åŸºäºçŸ©é˜µç†è®ºçš„å›¾åƒå¤„ç†ç®—æ³•ä¸å®ç°</p>
        </div>

        <!-- ç›®å½• -->
        <div class="toc">
            <h3>ğŸ“š ç›®å½•</h3>
            <ul>
                <li><a href="#introduction">1. å¼•è¨€</a></li>
                <li><a href="#image-representation">2. æ•°å­—å›¾åƒçš„æ•°å­¦è¡¨ç¤º</a></li>
                <li><a href="#color-spaces">3. é¢œè‰²ç©ºé—´ç†è®º</a></li>
                <li><a href="#image-transforms">4. å›¾åƒå˜æ¢ç®—æ³•</a></li>
                <li><a href="#encryption-algorithms">5. å›¾åƒåŠ å¯†ç®—æ³•</a></li>
                <li><a href="#watermark-theory">6. æ•°å­—æ°´å°ç†è®º</a></li>
            </ul>
        </div>

        <!-- 1. å¼•è¨€ -->
        <div class="theory-section" id="introduction">
            <h2>1. å¼•è¨€</h2>
            <p>
                çŸ©é˜µç†è®ºæ˜¯æ•°å­¦çš„é‡è¦åˆ†æ”¯ï¼Œåœ¨æ•°å­—å›¾åƒå¤„ç†é¢†åŸŸæœ‰ç€å¹¿æ³›çš„åº”ç”¨ã€‚æ•°å­—å›¾åƒå¤„ç†ï¼ˆDigital Image Processingï¼‰
                æ˜¯é€šè¿‡è®¡ç®—æœºå¯¹å›¾åƒè¿›è¡Œå»é™¤å™ªå£°ã€å¢å¼ºã€å¤åŸã€åˆ†å‰²ã€æå–ç‰¹å¾ç­‰å¤„ç†çš„æ–¹æ³•å’ŒæŠ€æœ¯ã€‚
            </p>
            <p>
                æœ¬ç³»ç»ŸåŸºäºçŸ©é˜µè¿ç®—å®ç°äº†å¤šç§å›¾åƒå¤„ç†ç®—æ³•ï¼ŒåŒ…æ‹¬å›¾åƒå˜æ¢ã€åŠ å¯†ç®—æ³•å’Œæ•°å­—æ°´å°æŠ€æœ¯ã€‚
                è¿™äº›ç®—æ³•çš„æ ¸å¿ƒéƒ½æ˜¯å¯¹å›¾åƒåƒç´ çŸ©é˜µè¿›è¡Œæ•°å­¦å˜æ¢ï¼Œä½“ç°äº†çŸ©é˜µç†è®ºåœ¨å®é™…åº”ç”¨ä¸­çš„é‡è¦ä»·å€¼ã€‚
            </p>
        </div>

        <!-- 2. æ•°å­—å›¾åƒçš„æ•°å­¦è¡¨ç¤º -->
        <div class="theory-section" id="image-representation">
            <h2>2. æ•°å­—å›¾åƒçš„æ•°å­¦è¡¨ç¤º</h2>
            
            <h3>2.1 å›¾åƒçŸ©é˜µè¡¨ç¤º</h3>
            <p>æ•°å­—å›¾åƒå¯ä»¥ç”¨çŸ©é˜µæ¥è¡¨ç¤ºï¼Œå…¶ä¸­æ¯ä¸ªçŸ©é˜µå…ƒç´ å¯¹åº”å›¾åƒä¸­çš„ä¸€ä¸ªåƒç´ ç‚¹ã€‚</p>
            
            <div class="algorithm-box">
                <h4>ç°åº¦å›¾åƒ</h4>
                <p>ç°åº¦å›¾åƒå¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ªäºŒç»´çŸ©é˜µï¼š</p>
                <div class="formula">
                    $$I = \begin{bmatrix}
                    I(0,0) & I(0,1) & \cdots & I(0,n-1) \\
                    I(1,0) & I(1,1) & \cdots & I(1,n-1) \\
                    \vdots & \vdots & \ddots & \vdots \\
                    I(m-1,0) & I(m-1,1) & \cdots & I(m-1,n-1)
                    \end{bmatrix}$$
                </div>
                <p>å…¶ä¸­ $I(x,y) \in [0, 255]$ è¡¨ç¤ºä½ç½® $(x,y)$ å¤„åƒç´ çš„ç°åº¦å€¼ã€‚</p>
            </div>

            <div class="algorithm-box">
                <h4>å½©è‰²å›¾åƒï¼ˆRGBï¼‰</h4>
                <p>å½©è‰²å›¾åƒç”±ä¸‰ä¸ªé¢œè‰²é€šé“ç»„æˆï¼Œå¯ä»¥è¡¨ç¤ºä¸ºä¸‰ç»´çŸ©é˜µï¼š</p>
                <div class="formula">
                    $$I_{RGB}(x,y) = \begin{bmatrix} R(x,y) \\ G(x,y) \\ B(x,y) \end{bmatrix}$$
                </div>
                <p>å…¶ä¸­ï¼š</p>
                <ul>
                    <li>$R(x,y) \in [0, 255]$ - çº¢è‰²åˆ†é‡</li>
                    <li>$G(x,y) \in [0, 255]$ - ç»¿è‰²åˆ†é‡</li>
                    <li>$B(x,y) \in [0, 255]$ - è“è‰²åˆ†é‡</li>
                </ul>
            </div>
        </div>

        <!-- 3. é¢œè‰²ç©ºé—´ç†è®º -->
        <div class="theory-section" id="color-spaces">
            <h2>3. é¢œè‰²ç©ºé—´ç†è®º</h2>

            <h3>3.1 RGBé¢œè‰²ç©ºé—´</h3>
            <p>RGBé¢œè‰²ç©ºé—´æ˜¯åŸºäºå…‰çš„ä¸‰åŸè‰²ï¼ˆçº¢ã€ç»¿ã€è“ï¼‰çš„åŠ è‰²æ¨¡å‹ã€‚ä»»æ„é¢œè‰²å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p>
            <div class="formula">
                $$C = \alpha R + \beta G + \gamma B$$
            </div>
            <p>å…¶ä¸­ $\alpha, \beta, \gamma \in [0, 1]$ ä¸ºå„é¢œè‰²åˆ†é‡çš„æƒé‡ç³»æ•°ã€‚</p>

            <h3>3.2 HSVé¢œè‰²ç©ºé—´</h3>
            <p>HSVé¢œè‰²ç©ºé—´æ›´ç¬¦åˆäººç±»å¯¹é¢œè‰²çš„æ„ŸçŸ¥ï¼ŒåŒ…å«ä¸‰ä¸ªåˆ†é‡ï¼š</p>
            <ul>
                <li><strong>H (Hue)</strong>: è‰²è°ƒï¼Œè¡¨ç¤ºé¢œè‰²çš„ç§ç±»ï¼ŒèŒƒå›´ [0Â°, 360Â°]</li>
                <li><strong>S (Saturation)</strong>: é¥±å’Œåº¦ï¼Œè¡¨ç¤ºé¢œè‰²çš„çº¯åº¦ï¼ŒèŒƒå›´ [0, 1]</li>
                <li><strong>V (Value)</strong>: æ˜åº¦ï¼Œè¡¨ç¤ºé¢œè‰²çš„äº®åº¦ï¼ŒèŒƒå›´ [0, 1]</li>
            </ul>

            <div class="algorithm-box">
                <h4>RGBåˆ°HSVçš„è½¬æ¢ç®—æ³•</h4>
                <p>è®¾ $R, G, B \in [0, 1]$ï¼Œè½¬æ¢å…¬å¼å¦‚ä¸‹ï¼š</p>
                <div class="formula">
                    $$\begin{align}
                    \text{max} &= \max(R, G, B) \\
                    \text{min} &= \min(R, G, B) \\
                    \Delta &= \text{max} - \text{min}
                    \end{align}$$
                </div>

                <p><strong>æ˜åº¦ Vï¼š</strong></p>
                <div class="formula">$$V = \text{max}$$</div>

                <p><strong>é¥±å’Œåº¦ Sï¼š</strong></p>
                <div class="formula">
                    $$S = \begin{cases}
                    0 & \text{if } \text{max} = 0 \\
                    \frac{\Delta}{\text{max}} & \text{otherwise}
                    \end{cases}$$
                </div>

                <p><strong>è‰²è°ƒ Hï¼š</strong></p>
                <div class="formula">
                    $$H = \begin{cases}
                    \text{undefined} & \text{if } \Delta = 0 \\
                    60Â° \times \frac{G-B}{\Delta} & \text{if } \text{max} = R \\
                    60Â° \times \left(2+\frac{B-R}{\Delta}\right) & \text{if } \text{max} = G \\
                    60Â° \times \left(4+\frac{R-G}{\Delta}\right) & \text{if } \text{max} = B
                    \end{cases}$$
                </div>
            </div>

            <h3>3.3 ç°åº¦åŒ–ç®—æ³•</h3>
            <p>ç°åº¦åŒ–æ˜¯å°†å½©è‰²å›¾åƒè½¬æ¢ä¸ºç°åº¦å›¾åƒçš„è¿‡ç¨‹ã€‚æœ¬ç³»ç»Ÿå®ç°äº†å¤šç§ç°åº¦åŒ–æ–¹æ³•ï¼š</p>

            <div class="algorithm-box">
                <h4>åŠ æƒå¹³å‡æ³•ï¼ˆæ¨èï¼‰</h4>
                <p>åŸºäºäººçœ¼å¯¹ä¸åŒé¢œè‰²æ•æ„Ÿåº¦çš„åŠ æƒå¹³å‡ï¼š</p>
                <div class="formula">
                    $$\text{Gray} = 0.299 \times R + 0.587 \times G + 0.114 \times B$$
                </div>
                <p>è¿™ä¸ªå…¬å¼è€ƒè™‘äº†äººçœ¼å¯¹ç»¿è‰²æœ€æ•æ„Ÿï¼Œå¯¹è“è‰²æœ€ä¸æ•æ„Ÿçš„ç‰¹æ€§ã€‚</p>
            </div>

            <div class="algorithm-box">
                <h4>å…¶ä»–ç°åº¦åŒ–æ–¹æ³•</h4>
                <p><strong>ç®€å•å¹³å‡æ³•ï¼š</strong></p>
                <div class="formula">$$\text{Gray} = \frac{R + G + B}{3}$$</div>

                <p><strong>æœ€å¤§å€¼æ³•ï¼š</strong></p>
                <div class="formula">$$\text{Gray} = \max(R, G, B)$$</div>

                <p><strong>å•é€šé“æ³•ï¼š</strong></p>
                <div class="formula">$$\text{Gray} = G \quad \text{ï¼ˆä»…å–ç»¿è‰²é€šé“ï¼‰}$$</div>
            </div>

            <div class="color-space-demo">
                <div class="color-demo-item">
                    <div class="color-sample" style="background: rgb(255, 100, 100);"></div>
                    <p><strong>RGBç¤ºä¾‹</strong><br>R:255, G:100, B:100</p>
                </div>
                <div class="color-demo-item">
                    <div class="color-sample" style="background: hsl(0, 100%, 70%);"></div>
                    <p><strong>HSVç¤ºä¾‹</strong><br>H:0Â°, S:100%, V:70%</p>
                </div>
                <div class="color-demo-item">
                    <div class="color-sample" style="background: rgb(150, 150, 150);"></div>
                    <p><strong>ç°åº¦ç¤ºä¾‹</strong><br>Gray:150</p>
                </div>
            </div>
        </div>

        <!-- 4. å›¾åƒå˜æ¢ç®—æ³• -->
        <div class="theory-section" id="image-transforms">
            <h2>4. å›¾åƒå˜æ¢ç®—æ³•</h2>

            <h3>4.1 è‰²å½©å˜æ¢</h3>

            <div class="algorithm-box">
                <h4>äº®åº¦è°ƒèŠ‚</h4>
                <p>é€šè¿‡å¯¹HSVé¢œè‰²ç©ºé—´ä¸­çš„Våˆ†é‡è¿›è¡Œçº¿æ€§å˜æ¢ï¼š</p>
                <div class="formula">
                    $$V' = V \times k_{\text{brightness}}$$
                </div>
                <p>å…¶ä¸­ $k_{\text{brightness}} > 1$ å¢åŠ äº®åº¦ï¼Œ$k_{\text{brightness}} < 1$ é™ä½äº®åº¦ã€‚</p>
            </div>

            <div class="algorithm-box">
                <h4>å¯¹æ¯”åº¦è°ƒèŠ‚</h4>
                <p>å¯¹æ¯ä¸ªåƒç´ å€¼è¿›è¡Œçº¿æ€§å˜æ¢ï¼š</p>
                <div class="formula">
                    $$I'(x,y) = \alpha \times I(x,y) + \beta$$
                </div>
                <p>å…¶ä¸­ï¼š</p>
                <ul>
                    <li>$\alpha > 1$: å¢åŠ å¯¹æ¯”åº¦</li>
                    <li>$0 < \alpha < 1$: é™ä½å¯¹æ¯”åº¦</li>
                    <li>$\beta$: äº®åº¦åç§»é‡</li>
                </ul>
            </div>

            <div class="algorithm-box">
                <h4>é¥±å’Œåº¦è°ƒèŠ‚</h4>
                <p>é€šè¿‡è°ƒèŠ‚HSVé¢œè‰²ç©ºé—´ä¸­çš„Såˆ†é‡ï¼š</p>
                <div class="formula">
                    $$S' = S \times k_{\text{saturation}}$$
                </div>
                <p>å…¶ä¸­ $k_{\text{saturation}} \in [0, 2]$ï¼Œå€¼è¶Šå¤§é¥±å’Œåº¦è¶Šé«˜ã€‚</p>
            </div>

            <h3>4.2 å‡ ä½•å˜æ¢</h3>
            <p>å‡ ä½•å˜æ¢ä½¿ç”¨é½æ¬¡åæ ‡ç³»ç»Ÿï¼Œé€šè¿‡$3 \times 3$å˜æ¢çŸ©é˜µå®ç°ï¼š</p>
            <div class="formula">
                $$\begin{bmatrix} x' \\ y' \\ 1 \end{bmatrix} = \begin{bmatrix} a & b & c \\ d & e & f \\ 0 & 0 & 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}$$
            </div>

            <div class="algorithm-box">
                <h4>å¹³ç§»å˜æ¢</h4>
                <p>å°†å›¾åƒåœ¨æ°´å¹³å’Œå‚ç›´æ–¹å‘ä¸Šç§»åŠ¨ï¼š</p>
                <div class="formula">
                    $$\begin{bmatrix} x' \\ y' \\ 1 \end{bmatrix} = \begin{bmatrix} 1 & 0 & dx \\ 0 & 1 & dy \\ 0 & 0 & 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}$$
                </div>
                <p>å…¶ä¸­ $dx, dy$ åˆ†åˆ«ä¸ºæ°´å¹³å’Œå‚ç›´æ–¹å‘çš„ä½ç§»é‡ã€‚</p>
            </div>

            <div class="algorithm-box">
                <h4>ç¼©æ”¾å˜æ¢</h4>
                <p>æ”¹å˜å›¾åƒçš„å°ºå¯¸ï¼š</p>
                <div class="formula">
                    $$\begin{bmatrix} x' \\ y' \\ 1 \end{bmatrix} = \begin{bmatrix} s_x & 0 & 0 \\ 0 & s_y & 0 \\ 0 & 0 & 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}$$
                </div>
                <p>å…¶ä¸­ $s_x, s_y$ åˆ†åˆ«ä¸ºæ°´å¹³å’Œå‚ç›´æ–¹å‘çš„ç¼©æ”¾å› å­ã€‚</p>
            </div>

            <div class="algorithm-box">
                <h4>æ—‹è½¬å˜æ¢</h4>
                <p>ç»•åŸç‚¹é€†æ—¶é’ˆæ—‹è½¬è§’åº¦ $\theta$ï¼š</p>
                <div class="formula">
                    $$\begin{bmatrix} x' \\ y' \\ 1 \end{bmatrix} = \begin{bmatrix} \cos\theta & -\sin\theta & 0 \\ \sin\theta & \cos\theta & 0 \\ 0 & 0 & 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}$$
                </div>
            </div>

            <div class="algorithm-box">
                <h4>é•œåƒå˜æ¢</h4>
                <p><strong>æ°´å¹³é•œåƒï¼š</strong></p>
                <div class="formula">
                    $$\begin{bmatrix} x' \\ y' \\ 1 \end{bmatrix} = \begin{bmatrix} -1 & 0 & w \\ 0 & 1 & 0 \\ 0 & 0 & 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}$$
                </div>

                <p><strong>å‚ç›´é•œåƒï¼š</strong></p>
                <div class="formula">
                    $$\begin{bmatrix} x' \\ y' \\ 1 \end{bmatrix} = \begin{bmatrix} 1 & 0 & 0 \\ 0 & -1 & h \\ 0 & 0 & 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}$$
                </div>
                <p>å…¶ä¸­ $w, h$ åˆ†åˆ«ä¸ºå›¾åƒçš„å®½åº¦å’Œé«˜åº¦ã€‚</p>
            </div>
        </div>

        <!-- 5. å›¾åƒåŠ å¯†ç®—æ³• -->
        <div class="theory-section" id="encryption-algorithms">
            <h2>5. å›¾åƒåŠ å¯†ç®—æ³•</h2>

            <h3>5.1 è¡Œåˆ—ç½®ä¹±åŠ å¯†</h3>
            <p>åŸºäºç½®æ¢çŸ©é˜µçš„æ€æƒ³ï¼Œé€šè¿‡æ‰“ä¹±å›¾åƒçŸ©é˜µçš„è¡Œåˆ—é¡ºåºå®ç°åŠ å¯†ã€‚</p>

            <div class="algorithm-box">
                <h4>è¡Œç½®ä¹±ç®—æ³•</h4>
                <p>ç”Ÿæˆéšæœºè¡Œç½®æ¢åºåˆ— $P_{\text{row}} = [p_1, p_2, \ldots, p_m]$ï¼Œå…¶ä¸­ $p_i \in [0, m-1]$ï¼š</p>
                <div class="formula">
                    $$I'(i, j) = I(P_{\text{row}}[i], j)$$
                </div>
                <p>è§£å¯†æ—¶ä½¿ç”¨é€†ç½®æ¢ï¼š</p>
                <div class="formula">
                    $$I(P_{\text{row}}[i], j) = I'(i, j)$$
                </div>
            </div>

            <div class="algorithm-box">
                <h4>åˆ—ç½®ä¹±ç®—æ³•</h4>
                <p>ç”Ÿæˆéšæœºåˆ—ç½®æ¢åºåˆ— $P_{\text{col}} = [q_1, q_2, \ldots, q_n]$ï¼Œå…¶ä¸­ $q_j \in [0, n-1]$ï¼š</p>
                <div class="formula">
                    $$I'(i, j) = I(i, P_{\text{col}}[j])$$
                </div>
                <p>è§£å¯†æ—¶ä½¿ç”¨é€†ç½®æ¢ï¼š</p>
                <div class="formula">
                    $$I(i, P_{\text{col}}[j]) = I'(i, j)$$
                </div>
            </div>

            <div class="algorithm-box">
                <h4>Fisher-Yatesæ´—ç‰Œç®—æ³•</h4>
                <p>ç”¨äºç”Ÿæˆéšæœºç½®æ¢åºåˆ—çš„ç®—æ³•ï¼š</p>
                <div class="formula">
                    for i = n-1 down to 1 do<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;j = random(0, i)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;swap(array[i], array[j])
                </div>
                <p>è¯¥ç®—æ³•ä¿è¯æ¯ç§æ’åˆ—çš„æ¦‚ç‡ç›¸ç­‰ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚</p>
            </div>

            <h3>5.2 Arnoldå˜æ¢åŠ å¯†</h3>
            <p>Arnoldå˜æ¢æ˜¯ä¸€ç§åŸºäºçŸ©é˜µè¿ç®—çš„å›¾åƒç½®ä¹±æ–¹æ³•ï¼Œé€‚ç”¨äºæ­£æ–¹å½¢å›¾åƒã€‚</p>

            <div class="algorithm-box">
                <h4>Arnoldå˜æ¢å…¬å¼</h4>
                <p>å¯¹äº$N \times N$çš„æ­£æ–¹å½¢å›¾åƒï¼ŒArnoldå˜æ¢å®šä¹‰ä¸ºï¼š</p>
                <div class="formula">
                    $$\begin{bmatrix} x' \\ y' \end{bmatrix} = \begin{bmatrix} 1 & a \\ b & ab+1 \end{bmatrix} \begin{bmatrix} x \\ y \end{bmatrix} \pmod{N}$$
                </div>
                <p>å…¶ä¸­ $a, b$ ä¸ºæ­£æ•´æ•°å‚æ•°ï¼Œé€šå¸¸å– $a=1, b=1$ã€‚</p>

                <p>å±•å¼€å½¢å¼ï¼š</p>
                <div class="formula">
                    $$\begin{align}
                    x' &= (x + ay) \bmod N \\
                    y' &= (bx + (ab+1)y) \bmod N
                    \end{align}$$
                </div>
            </div>

            <div class="algorithm-box">
                <h4>Arnoldé€†å˜æ¢</h4>
                <p>è§£å¯†æ—¶ä½¿ç”¨Arnoldé€†å˜æ¢ï¼š</p>
                <div class="formula">
                    $$\begin{bmatrix} x \\ y \end{bmatrix} = \begin{bmatrix} ab+1 & -a \\ -b & 1 \end{bmatrix} \begin{bmatrix} x' \\ y' \end{bmatrix} \pmod{N}$$
                </div>

                <p>å±•å¼€å½¢å¼ï¼š</p>
                <div class="formula">
                    $$\begin{align}
                    x &= ((ab+1)x' - ay') \bmod N \\
                    y &= (-bx' + y') \bmod N
                    \end{align}$$
                </div>
            </div>

            <div class="algorithm-box">
                <h4>Arnoldå˜æ¢çš„å‘¨æœŸæ€§</h4>
                <p>Arnoldå˜æ¢å…·æœ‰å‘¨æœŸæ€§ï¼Œå³å­˜åœ¨æ­£æ•´æ•°$T$ä½¿å¾—ï¼š</p>
                <div class="formula">
                    $$A^T \equiv I \pmod{N}$$
                </div>
                <p>å…¶ä¸­$A$ä¸ºArnoldå˜æ¢çŸ©é˜µï¼Œ$I$ä¸ºå•ä½çŸ©é˜µã€‚å‘¨æœŸ$T$çš„å¤§å°ä¸å›¾åƒå°ºå¯¸$N$å’Œå‚æ•°$a,b$æœ‰å…³ã€‚</p>
            </div>

            <h3>5.3 å›¾åƒè£å‰ªç®—æ³•</h3>
            <p>ä¸ºäº†æ»¡è¶³Arnoldå˜æ¢å¯¹æ­£æ–¹å½¢å›¾åƒçš„è¦æ±‚ï¼Œéœ€è¦å¯¹éæ­£æ–¹å½¢å›¾åƒè¿›è¡Œè£å‰ªã€‚</p>

            <div class="algorithm-box">
                <h4>ä¸­å¿ƒè£å‰ªç®—æ³•</h4>
                <p>ä»åŸå›¾åƒä¸­å¿ƒè£å‰ªå‡ºæœ€å¤§çš„æ­£æ–¹å½¢åŒºåŸŸï¼š</p>
                <div class="formula">
                    $$\begin{align}
                    \text{size} &= \min(\text{width}, \text{height}) \\
                    x_{\text{start}} &= \frac{\text{width} - \text{size}}{2} \\
                    y_{\text{start}} &= \frac{\text{height} - \text{size}}{2}
                    \end{align}$$
                </div>
                <p>è£å‰ªåŒºåŸŸä¸º $[x_{\text{start}}, y_{\text{start}}, x_{\text{start}}+\text{size}, y_{\text{start}}+\text{size}]$ã€‚</p>
            </div>
        </div>

        <!-- 6. æ•°å­—æ°´å°ç†è®º -->
        <div class="theory-section" id="watermark-theory">
            <h2>6. æ•°å­—æ°´å°ç†è®º</h2>

            <h3>6.1 æ•°å­—æ°´å°åŸºæœ¬æ¦‚å¿µ</h3>
            <p>æ•°å­—æ°´å°æ˜¯åœ¨æ•°å­—åª’ä½“ä¸­åµŒå…¥æ ‡è¯†ä¿¡æ¯çš„æŠ€æœ¯ï¼Œç”¨äºç‰ˆæƒä¿æŠ¤ã€å†…å®¹è®¤è¯ç­‰ç›®çš„ã€‚</p>

            <div class="algorithm-box">
                <h4>æ°´å°åµŒå…¥æ¨¡å‹</h4>
                <p>è®¾åŸå§‹å›¾åƒä¸º$I$ï¼Œæ°´å°ä¸º$W$ï¼ŒåµŒå…¥å¼ºåº¦ä¸º$\alpha$ï¼Œåˆ™å«æ°´å°å›¾åƒ$I'$ä¸ºï¼š</p>
                <div class="formula">
                    $$I'(x,y) = I(x,y) + \alpha \times W(x,y)$$
                </div>
                <p>å…¶ä¸­$\alpha$æ§åˆ¶æ°´å°çš„å¯è§æ€§å’Œé²æ£’æ€§çš„å¹³è¡¡ã€‚</p>
            </div>

            <h3>6.2 å›¾åƒæ°´å°ç®—æ³•</h3>

            <div class="algorithm-box">
                <h4>é€æ˜åº¦æ··åˆç®—æ³•</h4>
                <p>ä½¿ç”¨Alphaæ··åˆå®ç°æ°´å°çš„é€æ˜å åŠ ï¼š</p>
                <div class="formula">
                    $$\begin{align}
                    R' &= (1-\alpha) \times R_{\text{bg}} + \alpha \times R_{\text{wm}} \\
                    G' &= (1-\alpha) \times G_{\text{bg}} + \alpha \times G_{\text{wm}} \\
                    B' &= (1-\alpha) \times B_{\text{bg}} + \alpha \times B_{\text{wm}}
                    \end{align}$$
                </div>
                <p>å…¶ä¸­$\alpha \in [0,1]$ä¸ºé€æ˜åº¦å‚æ•°ï¼Œ$\text{bg}$è¡¨ç¤ºèƒŒæ™¯å›¾åƒï¼Œ$\text{wm}$è¡¨ç¤ºæ°´å°å›¾åƒã€‚</p>
            </div>

            <div class="algorithm-box">
                <h4>æ°´å°ä½ç½®è®¡ç®—</h4>
                <p>æ ¹æ®é¢„è®¾ä½ç½®å’Œåç§»é‡è®¡ç®—æ°´å°çš„å®é™…åæ ‡ï¼š</p>
                <div class="formula">
                    $$\begin{align}
                    x_{\text{wm}} &= x_{\text{base}} + \text{offset}_x \\
                    y_{\text{wm}} &= y_{\text{base}} + \text{offset}_y
                    \end{align}$$
                </div>
                <p>å…¶ä¸­$(x_{\text{base}}, y_{\text{base}})$ä¸ºåŸºå‡†ä½ç½®ï¼Œå¯ä»¥æ˜¯ä¹ä¸ªé¢„è®¾ä½ç½®ä¹‹ä¸€ã€‚</p>
            </div>

            <h3>6.3 æ–‡å­—æ°´å°ç®—æ³•</h3>

            <div class="algorithm-box">
                <h4>æ–‡å­—æ¸²æŸ“</h4>
                <p>ä½¿ç”¨Canvas APIæ¸²æŸ“æ–‡å­—æ°´å°ï¼š</p>
                <div class="formula">
                    ctx.font = size + "px " + fontFamily<br>
                    ctx.fillStyle = color<br>
                    ctx.globalAlpha = opacity<br>
                    ctx.fillText(text, x, y)
                </div>
            </div>

            <div class="algorithm-box">
                <h4>æ–‡å­—æ—‹è½¬å˜æ¢</h4>
                <p>å¯¹æ–‡å­—æ°´å°åº”ç”¨æ—‹è½¬å˜æ¢ï¼š</p>
                <div class="formula">
                    ctx.translate(x + width/2, y + height/2)<br>
                    ctx.rotate(angle Ã— Ï€/180)<br>
                    ctx.translate(-width/2, -height/2)
                </div>
                <p>å…¶ä¸­angleä¸ºæ—‹è½¬è§’åº¦ï¼ˆåº¦ï¼‰ï¼ŒÏ€ä¸ºåœ†å‘¨ç‡ã€‚</p>
            </div>
        </div>


    </div>

    <script>
        // å¹³æ»‘æ»šåŠ¨åˆ°é”šç‚¹
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // ä¸»é¢˜åˆ‡æ¢æ”¯æŒ
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            document.documentElement.setAttribute('data-theme', savedTheme);
        }

        // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        function showLoadingStatus() {
            const loadingDiv = document.createElement('div');
            loadingDiv.id = 'math-loading';
            loadingDiv.style.cssText = `
                position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
                background: rgba(0,0,0,0.8); color: white; padding: 20px;
                border-radius: 8px; z-index: 9999; font-size: 16px;
            `;
            loadingDiv.innerHTML = 'æ­£åœ¨åŠ è½½æ•°å­¦å…¬å¼æ¸²æŸ“å™¨...';
            document.body.appendChild(loadingDiv);
        }

        function hideLoadingStatus() {
            const loadingDiv = document.getElementById('math-loading');
            if (loadingDiv) {
                loadingDiv.remove();
            }
        }

        // åˆå§‹åŒ–KaTeXæ¸²æŸ“
        document.addEventListener("DOMContentLoaded", function() {
            showLoadingStatus();

            // æ£€æŸ¥KaTeXæ˜¯å¦åŠ è½½æˆåŠŸ
            function checkKaTeX() {
                if (typeof renderMathInElement !== 'undefined') {
                    try {
                        renderMathInElement(document.body, {
                            delimiters: [
                                {left: "$$", right: "$$", display: true},
                                {left: "$", right: "$", display: false},
                                {left: "\\[", right: "\\]", display: true},
                                {left: "\\(", right: "\\)", display: false}
                            ],
                            throwOnError: false,
                            errorColor: '#cc0000',
                            strict: false,
                            trust: false,
                            macros: {
                                "\\text": "\\textrm"
                            }
                        });
                        hideLoadingStatus();
                        console.log('æ•°å­¦å…¬å¼æ¸²æŸ“å®Œæˆ');
                    } catch (error) {
                        console.error('KaTeXæ¸²æŸ“é”™è¯¯:', error);
                        hideLoadingStatus();
                    }
                } else {
                    // å¦‚æœKaTeXè¿˜æ²¡åŠ è½½ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´åé‡è¯•
                    setTimeout(checkKaTeX, 100);
                }
            }

            // è®¾ç½®è¶…æ—¶ï¼Œå¦‚æœ10ç§’åè¿˜æ²¡åŠ è½½æˆåŠŸå°±éšè—åŠ è½½æç¤º
            setTimeout(() => {
                if (document.getElementById('math-loading')) {
                    hideLoadingStatus();
                    console.warn('KaTeXåŠ è½½è¶…æ—¶ï¼Œå¯èƒ½ç½‘ç»œè¿æ¥æœ‰é—®é¢˜');
                }
            }, 10000);

            checkKaTeX();
        });
    </script>
</body>
</html>
