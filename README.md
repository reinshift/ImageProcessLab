# 图像处理实验室

一个基于Web的图像处理实验平台，提供多种图像变换、加密和水印处理功能。

## 功能特性

### 🎨 图像变换
- **基础变换**：灰度转换、RGB通道调节、HSV调节
- **色彩调节**：对比度、亮度、饱和度调整
- **几何变换**：旋转、缩放、平移、镜像操作
- **实时预览**：所有调整都有实时预览效果

### 🔐 图像加密
- **行列加密**：基于MATLAB算法的行列置乱加密，支持仅行/仅列/行列组合
- **Arnold变换**：基于Arnold映射的图像置乱算法，支持自定义参数
- **图像裁剪**：为Arnold加密提供交互式正方形图像裁剪功能
- **逐步演示**：可视化展示加密过程的每个步骤
- **完美解密**：使用正确的逆算法实现完美解密

### 💧 水印处理
- **智能流程**：改进的选择流程，确保先选择主图像和水印后再进入处理界面
- **文字水印**：自定义文字、字体、颜色、大小
- **图像水印**：支持上传自定义水印图片，自动透明度处理
- **位置调节**：9个预设位置 + 精确偏移调整
- **透明度控制**：支持多种混合模式和透明度设置

## 技术特点

- **纯前端实现**：基于HTML5 Canvas API，无需服务器端处理
- **响应式设计**：适配桌面和移动设备，支持深色/浅色主题切换
- **模块化架构**：功能模块独立，易于扩展
- **用户友好**：直观的界面设计和操作流程，改进的用户体验
- **性能优化**：使用防抖技术，确保流畅的实时预览
- **算法准确性**：基于学术论文和MATLAB/Python代码实现的高精度算法

## 快速开始

### 1. 启动服务器
```bash
# 使用Python启动本地服务器
python -m http.server 8000

# 或使用Node.js
npx http-server -p 8000
```

### 2. 访问应用
在浏览器中打开 `http://localhost:8000`

### 3. 登录系统
默认密码：`xdugaodai`

### 4. 选择功能模块
- 点击"图像变换"进行图像调色和几何变换
- 点击"图像加密"体验Arnold变换和像素置乱
- 点击"水印处理"添加文字或图像水印

## 文件结构

```
ImageProcessLab/
├── index.html          # 登录页面
├── app.html            # 主应用页面
├── login.js            # 登录功能
├── app.js              # 主应用逻辑
├── utils.js            # 工具函数
├── login-style.css     # 登录页面样式
├── app-style.css       # 主应用样式
├── xdu.svg             # 应用Logo
├── test.html           # 功能测试页面
├── modules/            # 功能模块
│   ├── transform.js    # 图像变换模块
│   ├── encryption.js   # 图像加密模块
│   └── watermark.js    # 水印处理模块
└── README.md           # 项目说明
```

## 使用说明

### 图像变换模块
1. 上传图像文件（支持JPG、PNG、GIF）
2. 选择变换类型：
   - **基础变换**：一键灰度转换
   - **色彩调节**：RGB/HSV滑块调节
   - **几何变换**：旋转、缩放、平移操作
3. 实时预览效果
4. 下载处理结果

### 图像加密模块
1. 上传要加密的图像
2. 选择加密方法：
   - **Arnold变换**：设置迭代次数，观看逐步演示
   - **像素置乱**：选择行置乱、列置乱或两者结合
3. 执行加密或解密操作
4. 查看演示过程和下载结果

### 水印处理模块
1. 上传主图像和水印图像（或使用文字水印）
2. 调整水印属性：
   - **位置**：9个预设位置 + 精确偏移
   - **外观**：透明度、缩放、旋转、混合模式
   - **文字**：内容、字体、大小、颜色
3. 实时预览水印效果
4. 下载带水印的图像

## 键盘快捷键

- `Ctrl/Cmd + S`：下载当前结果
- `Ctrl/Cmd + N`：处理新图像
- `Ctrl/Cmd + R`：重置当前设置
- `Ctrl/Cmd + H`：打开帮助
- `Ctrl/Cmd + Q`：退出系统
- `Escape`：返回模块选择

## 浏览器兼容性

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

**注意**：需要支持HTML5 Canvas、FileReader API和ES6语法。

## 技术实现

### 核心技术
- **HTML5 Canvas**：图像处理和渲染
- **FileReader API**：本地文件读取
- **ES6 JavaScript**：模块化开发
- **CSS3**：响应式布局和动画

### 算法实现
- **Arnold变换**：基于矩阵变换的图像置乱
- **像素置乱**：Fisher-Yates洗牌算法
- **颜色空间转换**：RGB ↔ HSV转换
- **几何变换**：Canvas 2D变换矩阵

### 性能优化
- **防抖处理**：避免频繁的图像处理操作
- **内存管理**：及时清理ImageData对象
- **异步加载**：图像加载使用异步处理

## 开发说明

### 添加新功能模块
1. 在`modules/`目录创建新的JS文件
2. 实现标准的模块接口：
   ```javascript
   window.ModuleName = {
       init: function(container) { /* 初始化 */ },
       cleanup: function() { /* 清理资源 */ }
   };
   ```
3. 在`app.html`中引入模块文件
4. 在`app.js`中添加模块加载逻辑

### 自定义样式
- 修改CSS变量来调整主题色彩
- 在`app-style.css`中添加自定义样式
- 支持深色模式和高对比度模式